# Программа управления поворотно-наклонным устройством (ПНУ) Pan/Tilt MST1/B

Взаимодействие с устройством осуществляется через класс PNU (PNU/include/objects.h, PNU/include/objects.cpp).
Межсетевой обмен осуществляется по UDP протоколу.
Подробное описание команд управления представлено в manual.pdf (пункт 3.3).
Проект адаптирован под операционные системы Windows и Linux, но основное использование предполагается в ОСРВ
VxWorks.

## Подготовка к использованию

* Прочитать manual.pdf

```bash
# Загрузка проекта
git clone https://github.com/ermakov-dmitry/ControlPNU.git

# Установка зависимостей и субмодулей (юнит-тесты)
cd ControlPNU
git submodule update --init
```
IP адрес устройства: 192.168.59.218, порт: 10 000.

### Подключение устройства и запуск

* Включить блок питания, соединить ПНУ и ПУ через Ethernet.
* Выставить на Ethernet интерфейсе IP адрес с 59-й подсетью (например, 192.168.59.5).
* Пропинговать IP адрес ПНУ. ПНУ должно отвечать на запросы в случае успешного соединения.

> Пример использования представлен в PNU/main.cpp. Интерфейс взаимодействия кратко описан в PNU/include/objects.h

## Юнит-тесты

В качестве библиотеки для тестирования используется фреймворк
[Google Test](https://github.com/google/googletest).
В директории Tests/Unit находятся файлы с юнит-тестами. На текущий момент тестами покрыт модуль перевода из связанной
СК в сферическую СК устройства и приведения угловых координат в требуемые диапазоны (см. описание функций в
PNU/include/transformer.h).

> Для отключения юнит-тестов необходимо в файле CMakeList.txt закомментировать все строчки ниже # Including Tests Project:

## Matlab скрипт для анализа частотной характеристики
Основной скрипт: Matlab/PNUamplitude/main.m. В директориях freqlog* находятся данные для максимальной угловой
скорости в 120 гр/сек.
